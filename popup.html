<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    body { width: 360px; padding: 15px; font-family: sans-serif; background: #f4f6f8; }
    body.dark-mode { background: #1a1a1a; }
    .container { background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    body.dark-mode .container { background: #2d2d2d; }
    h2 { margin-top: 0; color: #333; font-size: 18px; text-align: center; }
    body.dark-mode h2 { color: #e0e0e0; }
    .badge { background: #e1f5fe; color: #0288d1; padding: 2px 6px; border-radius: 4px; font-size: 11px; }
    body.dark-mode .badge { background: #0d47a1; color: #90caf9; }
    label { color: #333; }
    body.dark-mode label { color: #e0e0e0; }
    input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
    body.dark-mode input { background: #3d3d3d; border-color: #555; color: #e0e0e0; }
    .btn-row { display: flex; gap: 10px; }
    button { flex: 1; padding: 10px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }
    #save { background: #4CAF50; color: white; }
    #testApi { background: #2196F3; color: white; }
    #darkModeToggle { background: #666; color: white; flex: 0.5; }
    #status { margin-top: 10px; padding: 10px; border-radius: 4px; font-size: 12px; display: none; word-break: break-all; }
    .success { background: #dff0d8; color: #3c763d; }
    .error { background: #f2dede; color: #a94442; }
    .loading { background: #fcf8e3; color: #8a6d3b; }
    body.dark-mode .success { background: #1b5e20; color: #a5d6a7; }
    body.dark-mode .error { background: #b71c1c; color: #ef9a9a; }
    body.dark-mode .loading { background: #f57f17; color: #fff9c4; }
    .stats-box { margin-top: 15px; padding: 10px; background: #f9f9f9; border-radius: 4px; font-size: 12px; }
    body.dark-mode .stats-box { background: #3d3d3d; }
    .stats-item { display: flex; justify-content: space-between; margin: 5px 0; color: #666; }
    body.dark-mode .stats-item { color: #b0b0b0; }
    .stats-value { font-weight: bold; color: #333; }
    body.dark-mode .stats-value { color: #e0e0e0; }
    .info-text { font-size: 11px; color: #666; margin-top: 15px; }
    body.dark-mode .info-text { color: #b0b0b0; }
    .settings-section { margin-top: 15px; padding: 10px; background: #f9f9f9; border-radius: 4px; }
    body.dark-mode .settings-section { background: #3d3d3d; }
    .settings-title { font-size: 13px; font-weight: bold; margin-bottom: 8px; color: #333; }
    body.dark-mode .settings-title { color: #e0e0e0; }
    .setting-item { margin: 8px 0; }
    .setting-label { font-size: 11px; color: #666; margin-bottom: 3px; }
    body.dark-mode .setting-label { color: #b0b0b0; }
    input[type="number"], input[type="color"] { width: auto; }
    .btn-small { padding: 6px 10px; font-size: 11px; margin-top: 10px; }
  </style>
</head>
<body>
  <div class="container">
    <h2>AI Helper <span class="badge">Gemini 2.5 Pro</span></h2>
    <label>–í–≤–µ–¥–∏—Ç–µ API Key (Google AI Studio):</label>
    <input type="text" id="apiKey" placeholder="AIzaSy...">
    
    <div class="btn-row">
      <button id="save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button id="testApi">üß™ –¢–µ—Å—Ç</button>
      <button id="darkModeToggle">üåô</button>
    </div>

    <div id="status"></div>
    
    <!-- Statistics Section -->
    <div class="stats-box">
      <div class="settings-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
      <div class="stats-item">
        <span>–†–µ—à–µ–Ω–æ –≤–æ–ø—Ä–æ—Å–æ–≤:</span>
        <span class="stats-value" id="statQuestions">0</span>
      </div>
      <div class="stats-item">
        <span>API –∑–∞–ø—Ä–æ—Å–æ–≤:</span>
        <span class="stats-value" id="statApiCalls">0</span>
      </div>
      <div class="stats-item">
        <span>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∫—ç—à–∞:</span>
        <span class="stats-value" id="statCacheHits">0</span>
      </div>
      <button id="resetStats" class="btn-small" style="background: #f44336; color: white; width: 100%;">–°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button>
    </div>

    <!-- Settings Section -->
    <div class="settings-section">
      <div class="settings-title">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
      <div class="setting-item">
        <div class="setting-label">–ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏ (–º—Å):</div>
        <input type="number" id="delayBetweenQuestions" value="1000" min="0" max="10000" step="100">
      </div>
      <div class="setting-item">
        <div class="setting-label">–¶–≤–µ—Ç –º–∞—Ä–∫–µ—Ä–∞:</div>
        <input type="color" id="markerColor" value="#cccccc">
      </div>
      <div class="setting-item">
        <label style="display: flex; align-items: center; gap: 8px;">
          <input type="checkbox" id="enableCache">
          <span class="setting-label" style="margin: 0;">–í–∫–ª—é—á–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤</span>
        </label>
      </div>
      <button id="exportSettings" class="btn-small" style="background: #FF9800; color: white; width: 48%; display: inline-block;">üì§ –≠–∫—Å–ø–æ—Ä—Ç</button>
      <button id="importSettings" class="btn-small" style="background: #9C27B0; color: white; width: 48%; display: inline-block; margin-left: 4%;">üì• –ò–º–ø–æ—Ä—Ç</button>
    </div>
    
    <p class="info-text">
      –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–¥–µ–ª—å: <b>gemini-2.5-pro</b><br>
      –≠—Ç–æ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –∏ –º–æ—â–Ω–∞—è –≤–µ—Ä—Å–∏—è.<br>
      –ï—Å–ª–∏ —Ç–µ—Å—Ç –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–∫—É 404 ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ –≤ –≤–∞—à–µ–º —Ä–µ–≥–∏–æ–Ω–µ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á.
    </p>
  </div>
  <script src="popup.js"></script>
</body>
</html>
