<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="popup.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>

  <!-- UPDATE NOTIFICATION BANNER -->
  <div id="update-banner" class="update-banner hidden">
    <i class="fas fa-arrow-up"></i>
    <span id="update-text">Обновление доступно</span>
    <a id="update-link" href="#" target="_blank">Скачать</a>
  </div>

  <!-- MAIN VIEW -->
  <div id="main-view">
    <div class="header">
      <div class="logo">
        <i class="fas fa-shield-alt logo-icon"></i>
        <span>adguard</span>
      </div>
      <div class="icons">
        <i class="fas fa-sync-alt" id="refresh-stats" title="Refresh"></i>
        <i class="fas fa-cog" id="open-settings" title="Settings"></i>
      </div>
    </div>

    <div class="status-container">
      <div class="site-name" id="current-site">google.com</div>
      <div class="status-text" id="status-text">Protection is enabled</div>
      
      <div class="blocked-count">
        <span id="solve-count">0</span>
        <span class="label">ads blocked</span>
      </div>

      <!-- MASTER TOGGLE -->
      <div class="toggle-wrapper">
        <div class="toggle-circle" id="master-switch">
          <i class="fas fa-check"></i>
        </div>
      </div>
    </div>

    <!-- RATE LIMIT INDICATOR -->
    <div class="rate-limit-bar" id="rate-limit-section">
      <div class="rate-info">
        <i class="fas fa-bolt"></i>
        <span id="rate-limit-text">Лимитов: 0</span>
      </div>
    </div>

    <div class="menu-list">
      <div class="menu-item">
        <i class="fas fa-filter item-icon" style="color: #fff;"></i>
        <span>Open filtering log</span>
      </div>
      <div class="menu-item">
        <i class="fas fa-crosshairs item-icon" style="color: #fff;"></i>
        <span>Block element on this page</span>
      </div>
    </div>
    
    <div class="footer">
      <span id="version-text">v3.0.0</span>
      <div class="os-icons">
        <i class="fab fa-windows"></i>
      </div>
    </div>
  </div>

  <!-- SETTINGS VIEW -->
  <div id="settings-view" style="display: none;">
    <div class="header">
      <div class="logo" id="back-to-main" style="cursor: pointer;">
        <i class="fas fa-arrow-left"></i> Настройки
      </div>
    </div>
    
    <div class="settings-content">
      <!-- BEHAVIOR -->
      <div class="section-title">ПОВЕДЕНИЕ</div>
      
      <div class="setting-row">
        <span><i class="fas fa-mouse-pointer"></i> Автоклик ответа</span>
        <label class="toggle-switch">
          <input type="checkbox" id="cfg-autoclick">
          <span class="slider"></span>
        </label>
      </div>

      <div class="setting-row">
        <span><i class="fas fa-eye"></i> Показывать маркер</span>
        <label class="toggle-switch">
          <input type="checkbox" id="cfg-marker">
          <span class="slider"></span>
        </label>
      </div>

      <!-- LANGUAGE -->
      <div class="section-title" style="margin-top: 15px;">ЯЗЫК</div>
      <div class="setting-row">
        <span><i class="fas fa-globe"></i> Язык интерфейса</span>
        <select id="cfg-language" class="select-input">
          <option value="ru">Русский</option>
          <option value="en">English</option>
        </select>
      </div>

      <!-- API KEYS -->
      <div class="section-title" style="margin-top: 15px;">API КЛЮЧИ (GEMINI)</div>
      <textarea id="apiKeysInput" placeholder="Вставьте ключи сюда (по одному на строку)..."></textarea>
      
      <div class="key-meter">
        <div class="progress-bg"><div class="progress-fill" id="keyProgress"></div></div>
        <div class="key-count" id="keyCountText">0 ключей</div>
      </div>

      <div class="btn-group">
        <button id="save-keys" class="adg-btn primary">Сохранить</button>
        <button id="check-keys" class="adg-btn secondary">Проверить</button>
      </div>

      <!-- CHECK RESULTS -->
      <div id="check-results"></div>
      <div id="status-msg"></div>

      <!-- EXPORT/IMPORT -->
      <div class="section-title" style="margin-top: 20px;">РЕЗЕРВНАЯ КОПИЯ</div>
      <div class="btn-group">
        <button id="export-settings" class="adg-btn secondary">
          <i class="fas fa-download"></i> Экспорт
        </button>
        <button id="import-settings" class="adg-btn secondary">
          <i class="fas fa-upload"></i> Импорт
        </button>
      </div>
      <input type="file" id="import-file" accept=".json" style="display: none;">

      <!-- UPDATE CHECK -->
      <div class="section-title" style="margin-top: 20px;">ОБНОВЛЕНИЯ</div>
      <div class="update-section">
        <div class="update-status" id="update-status">
          <i class="fas fa-check-circle"></i>
          <span id="update-status-text">Версия актуальна</span>
        </div>
        <button id="check-update" class="adg-btn secondary sm">
          <i class="fas fa-sync-alt"></i> Проверить
        </button>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
